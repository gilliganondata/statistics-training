---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r fig.width=10, fig.height=12}

end_date <- as.Date("2018-12-31")
start_date <- as.Date("2018-04-01")

date_range <- c(start_date, end_date)

# There needs to be a variable in .Renviron called GA_EXAMPLE_VIEW_ID
view_id <- Sys.getenv("GA_VIEW_ID_CKF")

# Pull the data we'll use and set up the basis for the different visualizations. Go ahead
# and make both sets of results in title case.
ga_check_for_dates <- google_analytics(view_id,
                              date_range = date_range,
                              metrics = "sessions",
                              dimensions = c("date","day", "yearMonth", "channelGrouping"),
                              anti_sample = TRUE) %>%
  mutate(channelGrouping = toTitleCase(channelGrouping),
         day = as.numeric(day))

gg <- ggplot(ga_check_for_dates,
             aes(x=day, y=sessions, colour = channelGrouping)) +
  geom_line() +
  facet_grid(rows = vars(yearMonth), scales="free_x") +
  theme_light()

gg




```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

